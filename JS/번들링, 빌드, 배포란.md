- [번들링(bundling)](#번들링bundling)
  - [번들링의 역할](#번들링의-역할)
  - [대표적인 도구](#대표적인-도구)
- [빌드(build)](#빌드build)
  - [Next.js 빌드 명령 예시](#nextjs-빌드-명령-예시)
- [배포(deploy)](#배포deploy)
- [전체 흐름](#전체-흐름)

# 번들링(bundling)

브라우저는 수많은 JS/CSS 파일을 개별적으로 요청하면 느려지기 때문에, 이를 하나의 묶음(번들)로 압축해서 전달하는 것이 효율적이다.

이때 여러 개의 파일(모듈)을 하나 또는 몇 개의 파일로 묶는 과정을 '번들링' 이라고 한다.

## 번들링의 역할

| 역할                              | 설명                                                       |
| --------------------------------- | ---------------------------------------------------------- |
| **모듈 통합**                     | `import`, `export`로 분리된 JS 파일들을 하나의 번들로 합침 |
| **압축(minify)**                  | 불필요한 공백, 주석 제거                                   |
| **트리 셰이킹(Tree-shaking)**     | 실제로 사용되지 않는 코드 자동 제거                        |
| **코드 스플리팅(Code splitting)** | 필요한 시점에 필요한 코드만 로드하게 분리                  |

## 대표적인 도구

- Webpack
- Vite
- Rollup
- esbuild
- Next.js 내부적으로도 이걸 자동으로 함 (Turbopack)

</br>

# 빌드(build)

'빌드'란 개발자가 작성한 코드를 실행 가능한 형태로 변환하는 과정으로, 배포 가능한 결과물이 만들어지는 단계를 말한다.

예를 들면 다음과 같은 것들이 빌드에 해당된다.

- TypeScript → JavaScript 변환
- JSX → `React.createElement()` 형태로 변환
- 최신 문법(ES2023 등) → 브라우저 호환 코드로 트랜스파일
- 이미지, CSS, 폰트 등을 최적화 및 압축
- 환경 변수 주입 (`.env` → 실제 값으로 대체)

## Next.js 빌드 명령 예시

```
npm run build
```

- TypeScript 컴파일
- React 코드 → 최적화된 JS 번들 생성
- 정적 HTML/JSON 생성 (SSG용)
- 서버 코드 → Node.js용으로 변환

이러한 일련의 과정들을 거쳐 결과물이 `.next/` 디렉토리에 생기게 된다.

</br>

# 배포(deploy)

빌드된 결과물을 실제 서버나 CDN에 업로드해서 사용자들이 접근할 수 있게 하는 과정을 '배포'라고 한다.

즉, 로컬에서 만든 결과물(`.next/`, `dist/`, `build/` 폴더)을
실제 서버(Vercel, AWS, Nginx 등)에 올려 브라우저로 접근할 수 있게 만드는 게 '배포'다.

| 단계 | 내용                                          |
| ---- | --------------------------------------------- |
| 1    | `npm run build` → 빌드 결과 생성              |
| 2    | 서버에 결과 업로드 (예: Vercel에 push)        |
| 3    | 서버가 요청 받으면 HTML/JS/CSS 파일 제공      |
| 4    | 사용자는 `https://my-site.com` 으로 접근 가능 |

</br>

# 전체 흐름

| 단계 | 이름       | 하는 일                                     | 비유      |
| ---- | ---------- | ------------------------------------------- | --------- |
| 1️⃣   | **번들링** | 여러 코드 파일을 하나로 묶음 (최적화 포함)  | 재료 손질 |
| 2️⃣   | **빌드**   | 실제 실행 가능한 형태로 변환                | 요리 완성 |
| 3️⃣   | **배포**   | 완성된 결과를 서버에 올려서 사용자에게 제공 | 음식 서빙 |

Next.js 기준으로 보면 다음과 같다.

| 명령어          | 역할      | 설명                                             |
| --------------- | --------- | ------------------------------------------------ |
| `npm run dev`   | 개발 서버 | 번들링 & 빌드를 실시간으로 해줌 (개발용)         |
| `npm run build` | 빌드      | 프로덕션용으로 코드 최적화 및 정적 파일 생성     |
| `npm start`     | 서버 실행 | 빌드된 결과를 실제로 서비스 (배포 환경에서 실행) |
