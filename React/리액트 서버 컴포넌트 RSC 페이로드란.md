- [RSC 페이로드란?](#rsc-페이로드란)
  - [Json-like 데이터란?](#json-like-데이터란)
- [클라이언트로 가는 데이터 흐름](#클라이언트로-가는-데이터-흐름)
  - [1. 서버에서 React Server Component를 실행](#1-서버에서-react-server-component를-실행)
  - [2. 서버가 클라이언트로 RSC 페이로드 및 데이터 전송](#2-서버가-클라이언트로-rsc-페이로드-및-데이터-전송)
  - [3. 클라이언트에서 해석](#3-클라이언트에서-해석)

# RSC 페이로드란?

**RSC 페이로드(RSC Payload)** 는 React Server Component가 서버에서 렌더링된 후, 클라이언트로 전달되는 React 컴포넌트 트리를 직렬화한 데이터를 말한다.

이 페이로드는 일반적인 HTML이 아니라, **JSON-like** 형식으로 되어 있으며, 브라우저에서 직접 실행되지 않고 React의 클라이언트 런타임에 의해 해석된다.

또한 자바스크립트 번들에 포함되는 게 아닌 별도의 네트워크 요청을 통해 클라이언트 측으로 전송된다.

## Json-like 데이터란?

JSON-like는 JSON과 유사한 구조지만, JSON에서 허용되지 않는 데이터(함수, Symbol 등)가 포함될 수도 있는 데이터 형식이다.

# 클라이언트로 가는 데이터 흐름

## 1. 서버에서 React Server Component를 실행

- 데이터베이스 조회, API 호출 등을 수행.
- 서버 컴포넌트는 서버에서 실행되고, HTML이 아닌 **RSC 페이로드(JSON-like)**로 변환됨. RSC 페이로드는 컴포넌트 트리 구조와 `props`, 어디에 어떤 클라이언트 컴포넌트가 어느 위치에 삽입될 지에 대한 정보를 담고 있다.

## 2. 서버가 클라이언트로 RSC 페이로드 및 데이터 전송

- 서버는 초기 HTML(SSR/SSG)과 RSC Payload 그리고 클라이언트 컴포넌트가 담긴 JS 번들을 클라이언트로 전송 한다.

```
RSC 페이로드는 스트리밍 방식으로 전달될 수 있어서, 클라이언트가 받은 데이터를 즉시 렌더링하면서, 남은 데이터를 계속 받아올 수 있다. 참고로 Next.js의 서버 컴포넌트의 기본 전송 방식이 스트리밍 방식이다.
```

## 3. 클라이언트에서 해석

- 브라우저가 초기 HTML을 렌더링하여 화면에 표시한다.
- RSC Payload 받아서 React가 UI를 갱신한다.
- JS 번들 로드 후 상호작용 활성화(Hydration)한다.
